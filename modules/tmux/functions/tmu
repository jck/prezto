#
# Attaches to an existing tmux named session or creates a new one
#
# Authors:
# Keerthan Jaic <jckeerthan@gmail.com>
#

local usage session

usage="$(
cat <<EOF
usage: $0 [-d] session-name

options:
  -g Detach other clients of existing session OR do not attach new session
EOF
)"

local -a opts
zparseopts -D -a opts d

if (( $# != 1 )); then
  print "$usage"
  return 1
fi

session=$1

if ! (tmux has -t $session 2> /dev/null); then
  tmux new $opts -s $session
else
  tmux attach $opts -t $session
fi
